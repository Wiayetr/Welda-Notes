# 敏捷开发与DevOps

## 1. 敏捷开发

### 1.1 敏捷开发概述

应对快速变化需求的一种软件开发模式，描述了一套软件开发的价值和原则。

### 1.2 敏捷过程

#### 1.2.1 敏捷过程原则

- 尽早交付可以工作的软件，随时适应需求变化。时间尺度尽量短。
- 面对面交谈，尽量减少工作量，团队始终保持高效率。

#### 1.2.2 常见敏捷方法

- scrum
- scrumban
- 快速应用程序开发
- 看板
- 自适应软件开发
- 敏捷建模
- 敏捷统一过程

#### 1.2.3 敏捷过程

- 对需求进行调研、设计、确认
- 功能设计、实现、测试
- 软件测试
- 版本发布

## 2. DevOps

### 2.1 DevOps定义

一整套结合了Development、QA（质保）、以及Operation的软件开发运维模式，即一整套敏捷开发方法论与生态工具集。

### 2.2 DevOps特性

#### 2.2.1 适应变化：敏捷开发

敏捷开发专注于每隔几周甚至更短时间内以较小增量构建与交付软件。

有限考虑产品功能，不断收集反馈，经过分析形成需求的变化与设计方案，并形成开发，开发完成后迅速测试与发布，形成一个循环。

#### 2.2.2 DevOps自动化：CI/CD

CI：Continuous Integration

CD：Continuous Delivery，Continuous Deployment

持续将代码更改合并到共享分支或主干中，一旦开发人员对应用所做的更改被合并，系统就会通过自动构建应用并运行不同级别的自动化测试来验证更改。

持续交付指的是自动将已验证的代码发布到储存库。

持续部署指的是可以自动将应用发布到生产环境。

#### 2.2.3 服务的隔离：容器

不同服务需要不同环境依赖。

本质上是对计算机资源的隔离与控制。

#### 2.2.4 容器的管理：Kubernetes

Kubernetes是用于自动部署、扩展和管理容器化应用的开源系统。

底层基础设施由此进行了抽象，整合计算、网络、储存等资源。

### 2.3 DevOps平台

用于支持DevOps流程的工具和集成的组合。



## 3. CI/CD流水线

### 3.1 CI/CD

#### 3.1.1 CI/CD概述

- 频繁发布（按需）
- 自动化流程。包括构建、测试、分析、版本控制
- 可重复：把某个历史版本代码输入，应该得到对应相同的可交付产出。
- 快速迭代

#### 3.1.2 持续集成

将代码更改合并到共享分支或主干中。系统会通过自动构建应用并运行不同级别的自动化测试来验证更改，保证更改没有对应用造成破坏。

代码集成到主干之前必须通过自动化测试，只要有一个测试用例不通过，则不能集成。

- 检测系统反复询问代码系统是否有新的变更，若有，开始测试。
- 无论是否有变更，检测程序都会定期启动构建。
- 推送新代码时，向监测系统发送通知。

#### 3.1.3 持续交付

完成自动化流程测试后，自动将集成后的代码部署到更贴近真实运行环境的类生产环境进行更多的测试。

若无误，可手动部署到生产环境中。

#### 3.1.4 持续部署

对持续交付的扩展，每一步都是自动的。

### 3.2 流水线设计原则

- 构建：进行应用编译的阶段
- 测试：对代码测试，一般使用自动化
- 发布：将应用交付到储存库
- 部署：将代码部署到生产环境
- 验证与合规

#### 3.2.1 CI代码提交

- 多数情况下，流水线的运行由代码提交触发
- 代码提交阶段也称为版本控制
- 代码每个版本被持久化存储

#### 3.2.2 CI静态分析

防止代码语法错误

#### 3.2.3 CI制品构建与制品存储

##### 3.2.3.1 制品构建

编译应用程序的阶段，通常使用Docker容器构建应用程序

##### 3.2.3.2 制品存储

构建就绪后，程序包储存在制品仓库或Repository工具的中央数据库

#### 3.2.4 CI自动测试

包括功能测试和性能测试

#### 3.2.5 CD烘焙部署

- 烘焙：将制品转移到测试环境，改环境与生产环境具有相同的配置
- 部署：将上游制品移至测试阶段，最终移至生产环境

#### 3.2.6 CD反馈协作

出现错误立刻反馈给开发团队，形成封闭的循环过程



